---
index: 6
title : Java中的反射
category : 
  - Java
  - interview
tag : 
  - Basics
---

## 什么是反射

- 在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；对于任意一个对象，都能够调用它的任意一个方法和属性；这种动态获取的信息以及动态调用对象的方法的功能称为 Java 语言的反射机制。

## 反射的作用

- 在运行时**判断**任意一个对象所属的类
- 在运行时**构造**任意一个类的对象
- 在运行时判断任意一个类所具有的成员变量和方法
- 在运行时**调用**任意一个对象的方法
- 生成动态代理

## 什么时候用反射

- 需要访问隐藏属性或者调用方法改变程序原来的逻辑，这个在开发中是很常见的，由于一些原因，系统并没有开放一些接口出来，这个时候利用反射是一个有效的解决办法。
- 自定义注解，注解就是在运行时利用反射机制来获取的。
- 在开发中动态加载类，比如在 Android 中的动态加载解决65k问题等等，模块化和插件化都离不开反射。

## 反射的工作原理

- 我们知道，每个 Java 文件最终都会被编译成一个 .class 文件，这些 Class 对象承载了这个类的所有信息，包括父类、接口、构造函数、方法、属性等等，这些class文件在程序运行时会被 ClassLoader 加载到虚拟机中。当一个类被加载以后，Java 虚拟机就会在内存中自动产生一个 Class 对象，而一般情况下用 new 来创建对象，实际上本质都是一样的，只是底层原理对我们开发者透明罢了。有了 class 对象的引用，就相当于有了 Method、Field、Constructor 的一切信息，在 Java 中，有了对象的引用就有了一切，剩下就靠自己发挥了。

## 参考

[Java反射以及在Android中的特殊应用](https://www.jianshu.com/p/8f394d90a85c)