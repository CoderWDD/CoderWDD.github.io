---
index: 8
title: 结构型-代理模式
category: 
  - Design Patterns
  - Android Advanced
---

## 介绍

- 设想这样一种场景，在学校里，有那么多学生，每个学生都可能有不同的问题需要反馈，如果每个学生都直接把问题反馈到校长那去，可想而知校长的任务有多繁重，事实上也不会有校长这么干。我们实际中的解决方案是，学生把问题反馈到老师处，老师再把问题反馈到主任处，最后再由主任反馈给校长，假设学校有1000名学生，一个老师负责20名学生，一个主任负责10个老师，这样子处理之后，校长实际只需要跟5个主任对接，而不需要跟1000名学生直接对接。
- 上面所说的 **老师**、**主任**，其实就起了一个 **代理** 的角色，而 **校长** 就是代理模式中的真正提供服务的 **服务方**，**学生** 就是我们的客户端

## 作用

- 正如上面看到的，当有新的学生进来时，不需要直接去通知校长（即不用修改 **服务方**）也不需要通知 **老师**、**主任**（即不用修改 **代理方**），只需要学生直接反馈，就能达到目的
- 规范点说，就是，代理模式，可以将来自不同 **客户端** 的请求，发送给真正的 **服务方**

## 适用场景

- 当需要控制、监控、记录对 **服务方** 的访问时，可以使用代理模式，可以用 **动态代理** 的方式，动态地提供不同的 **服务方**
- 当要对一个 **重量级服务对象** 进行访问时，可以使用代理模式，通过代理的方式，把对象的初始化延迟到真正使用的时候
- 当需要对 **服务方** 的访问结果进行缓存时，可以使用代理模式，通过在代理的角色，可以在代理中对结果进行缓存控制，

## 流程图

![image-20221103214349251](http://picbed.coderwdd.top/picbed/image-20221103214349251.png)

## 代码Demo

[Proxy Pattern Demo](https://github.com/CoderWDD/DesignPattern/tree/master/src/main/kotlin/proxy_pattern)

## 推荐资料

[refactoringguru - 代理模式](https://refactoringguru.cn/design-patterns/proxy)