---
category:
  - Database
index : 5
title : 第五章：关系数据理论
---

# 关系数据理论

## 回顾

### 关系模式

- 本质是一个五元组：**`R ( U, D, DOM, F )`**
  - R：关系名；
  - U：组成该关系的属性名集合；
  - D：属性组U中属性所来自的域；
  - DOM：属性向域的映象集合；
  - F：属性间数据的依赖关系集合。

---

### 关系完整性约束

- 实体完整性
- 参照完整性
- 用户自定义完整性

---

### 候选码与主码

- 候选码：能唯一确定一个元组的码或其集合，就叫候选码
- 主码：从候选码中选一个作为主码

---

### 主属性与非主属性

- 主属性：指包含在所有候选码中的属性
- 非主属性：不是主属性的，就是非主属性

---

### 数据依赖

含义：基于属性值的对应关系所体现出来的属性间的决定与被决定关系（通俗点讲，就是非主键的属性依赖以主键）

## 关系规范化

- 含义：指关系模式调优的一种机制，采用**关系模式分解**等措施，消除关系模式中不合适的数据依赖，解决数据的插入异常、删除异常、更新异常和数据冗余等问题。

---

### 数据依赖的类型

- 函数依赖：`Y=f(X)`，X与Y之间是一对一、或多对一的关系
- 多值依赖
- 连接依赖

---

#### 函数依赖

- 平凡函数依赖与非平凡函数依赖：
  - 平凡函数依赖：
    - 即作为码的字段，不在结果中出现
  - 非平凡函数依赖：
    - 即作为码的字段，在结果中出现了
- 完全函数依赖与部分函数依赖：
  - 完全函数依赖：
    - 即主码的组合是能唯一确定一个结果的最小集合（这里不说元组，是因为在分析的过程中，最小的单位不是元组，而是具体到某一个或几个属性）
  - 非完全函数依赖/部分函数依赖：
    - 即主码的一个子集也能和主码一样唯一确定同一个结果
- 传递函数依赖：
  - 即如果A很函数B，B能函数决定C，则A能函数决定C

---

### 范式

- 依据强弱程度划分：
  - 第一范式（1NF）
  - 第二范式（2NF）
  - 第三范式（3NF）
  - BC范式（BCNF）
  - 第四范式（4NF）
  - 第五范式（5NF）

- 提高范式等级的方法（规范化）：**模式分解**
- **是高等级范式，就一定是低等级范式**

---

#### 第一范式

只要所有的属性都不能再拆分，就属于第一范式，即不能出现以下这种情况。

![image-20220524182730034](https://raw.githubusercontent.com/CoderWDD/myImages/main/blog_images/image-20220524182730034.png)

注：第一范式是关系型数据库的最基本要求，不满足这一点，就不能称为关系型数据库

---

#### 第二范式

属于第一范式，且每一个**非主属性完全函数依赖于码**，通俗点说，就是可以用码唯一确定所有属性

---

#### 第三范式

属于第二范式，且**不存在非主属性对码的传递函数依赖**，通俗点说，就是非主属性不能有传递函数依赖

---

#### BC范式

满足2NF和3NF，同时**不存在主属性对码的部分函数依赖和传递函数依赖**，即其每一个函数依赖的决定属性因素都包含码

- BC范式的特性：
  - 所有非主属性对每一个码都是完全函数依赖；
  - 所有主属性对每一个不包含它的码，也是完全函数依赖；
  - 不存在任何属性完全函数依赖于非码的一组属性。

---

#### 模式分解法的原则

![image-20220524183902685](https://raw.githubusercontent.com/CoderWDD/myImages/main/blog_images/image-20220524183902685.png)

---

## 数据依赖的公理系统

### 证明规则

- 自发律
- 增广律
- 传递律

![image-20220524184611371](https://raw.githubusercontent.com/CoderWDD/myImages/main/blog_images/image-20220524184611371.png)

---

### 推理规则

推理规则是由证明规则推导出来的

- 合并规则
- 伪传递规则
- 分解规则

![image-20220524203328775](https://raw.githubusercontent.com/CoderWDD/myImages/main/blog_images/image-20220524203328775.png)

---

### 函数依赖集的闭包

关系模式`R<U，F>`中为F所逻辑蕴含的函数依赖的全体叫作F的闭包，记为`F+`。

注：求闭包是一个很难的问题，属于`NP问题`
