---
category:
  - Frontend
index : 2
title :  你不知道的JavaScript(上)
author : 吴某人的宝贝
---

## JS作用域是什么

### 编译原理

在传统编译语言的流程中，程序中的一段源代码在执行前会经历三个步骤，统称为编译。

- 分词/词法分析
  - 这个过程会将由字符组成的字符串分解成（对编译语言来说）有意义的代码块，这些代码块被称为词法单元。
  - 例如，考虑程序`var a = 2;`，这段程序通常会被分解为下面这些词法单元：var、a、=、2、;。空格是否会被当作词法单元，取决于空格在这门语言中是否具有意义。
- 解析/语法分析
  - 这个过程是将词法单元流（数组）转换成一个由元素逐级嵌套所组成的代表了 程序语法结构的树。这个树被称为“抽象语法树”
  - `var a = 2；`的抽象语法树中可能会有一个叫做VariableDeclaration的顶级节点，接下来是一个叫做Identifier（它的值是a）的子节点，以及一个叫做AssignmentExpression的子节点。AssignmentExpression节点有一个叫做NumericLiteral（它的值是2）的子节点。
- 代码生成
  - 将AST转化为可执行代码的过程被称为代码生成。这个过程与语言、目标平台等息息相关。
  - 抛开具体细节，简单来说就是有某种方法可以将`var a = 2;`的AST转化为一组机器指令，用来创造一个叫做a的变量（包括分配内存等），并将一个值存储在a中。

